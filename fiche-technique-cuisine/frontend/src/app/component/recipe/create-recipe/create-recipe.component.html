<section class="container">
  <h2 class="center-align">
    Création d'une recette
  </h2>
  <div *ngIf="this.recipeGroup" class="row">
    <form [formGroup]="recipeGroup" (ngSubmit)="validate()" class="col s12">
      <div class="input-field col s6">
        <input id="name" type="text" class="validate" formControlName="name">
        <label for="name">Nom </label>
      </div>

      <div class="input-field col s6">
        <input id="responsable" type="text" class="validate" formControlName="responsable">
        <label for="responsable">Responsable </label>
      </div>

      <div class="input-field col s6">
        <input id="nbOfCover" type="number" class="validate" formControlName="nbOfCover">
        <label for="nbOfCover">Nombre de couvert </label>
      </div>

      <div class="input-field col s6">
        <input id="category" type="text" class="validate" formControlName="category">
        <label for="category">Catégorie </label>
      </div>

      <div class="input-field col s12"> <!-- Div où on va ajouter les nouvelles étapes -->
        <div *ngFor="let el of stepOrRecipeToShow; let i = index">

          <!-- Template ajout ingrédient -->
          <div *ngIf = "isStep(el); else elseBlock">
            <app-create-step [stepGroup] = "getStepGroup(i)">

            </app-create-step>
          </div>

          <ng-template #elseBlock>
            {{ el.name }}
            <br>
            C'est une recette
          </ng-template>
          <!-- The repeated alias template -->
          <!-- <label for="alias-{{ i }}">Alias:</label>
          <input id="alias-{{ i }}" type="text" [formControlName]="i"> -->
        </div>
      </div>

      <div class="col s12 center-align">
        <button type="submit" class="waves-effect waves-light btn">
          Valider
        </button>

        <button type = "button" class="btn purple darken-1" (click) = "addStep()">
          Ajouter une étape
        </button>
        <br>
        <div class="input-field col s8 offset-s2">
          <select (ngModelChange)="change($event)" #selectedRecipe (change) = "changeSelect($event, selectedRecipe.value)">
            <option value="" disabled selected></option>
            <option *ngFor="let al of recipe_list" [value]="al.id">
              {{al.name}}
            </option>
          </select>
          <label>Recettes associées</label>
        </div>
      </div>
    </form>
  </div>
</section>
